## 现状判断
- 用户示例使用内联固定色值（如 `background:#fffbe6`、`border-left:#faad14`），当前项目的主题切换基于通用类与 CSS 变量，无法覆盖固定内联色值。
- 因此，示例代码在不调整的情况下不能随主题变化。

## 推荐规范（无需改后端）
- 规范一：使用通用类名控制配色（`.info/.success/.warning/.error/.clear`），布局可继续用内联或自定义类。
- 规范二：若坚持内联样式，配色改为 CSS 变量引用（`var(--warning-bg)` 等），即可被主题切换接管。
- 规范三：可选使用 `classMap` 将自定义类映射到通用类别，但需避免固定色值，否则映射样式难以覆盖（或配合“强制覆盖”策略）。

## 规范示例（基于用户代码）
- 类名方式：
```
<div class="warning" style="display:flex;align-items:center;gap:12px;padding:16px 20px;margin:0;border-left:4px solid var(--warning-border);border-radius:6px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;font-size:14px;line-height:1.6;">
  <span style="font-size:20px;">⚠️</span>
  <div>
    <div style="font-weight:600;">抱歉，暂不支持 {{ filename or '该文件' }} 格式</div>
    <div style="margin-top:4px;">{{ tip or '请将文件另存为受支持的格式（如 docx、pdf）后重新上传。' }}</div>
  </div>
</div>
```
- 变量方式（保持内联但可主题化）：
```
<div style="display:flex;align-items:center;gap:12px;padding:16px 20px;margin:0;border-left:4px solid var(--warning-border);border-radius:6px;background:var(--warning-bg);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif;font-size:14px;color:var(--warning-text);line-height:1.6;">
  <span style="font-size:20px;">⚠️</span>
  <div>
    <div style="font-weight:600;color:var(--warning-text);">抱歉，暂不支持 {{ filename or '该文件' }} 格式</div>
    <div style="margin-top:4px;color:var(--warning-text);">{{ tip or '请将文件另存为受支持的格式（如 docx、pdf）后重新上传。' }}</div>
  </div>
</div>
```
- classMap 映射（若使用自定义类）：
```
<!-- 模板 -->
<div class="user-warning" style="display:flex;..."> ... </div>

<!-- Context Data(JSON)中：
{
  "classMap": { ".user-warning": "warning" }
}
-->
```
（配色仍建议使用通用类或 `var(...)`，否则固定色值会覆盖映射效果）

## 可选项目增强（若需兼容固定内联色值）
- 在 iframe 注入的主题样式中为颜色相关属性增加 `!important`（如 `background/color/border-color`），提高覆盖力以统一主题。
- 前端检测模板中的固定色值（正则扫描 `style="...#rrggbb..."`），在页面顶部提示“发现固定色值，主题切换可能无效”，引导用户改为类或变量。

## 实施改动点
- `templates/index.html`：
  - 在注入的基础样式中为颜色相关属性添加 `!important`（可开关启用）。
  - 添加固定色值检测与提示。
- 后端无需改动；继续传递 `theme` 变量即可。

## 交付与验证
- 用上述三种方式分别验证：通用类、CSS 变量、classMap 映射；确保主题切换即时生效。
- 保持现有错误提示逻辑不变。
## 目标与范围
- 在现有实时渲染页面中增加固定可选的色系模板（主题），支持 info / success / warning / error / clear 五类消息样式。
- 用户上传/编辑 Jinja2 模板时，可直接通过下拉框切换主题，预览区即时应用所选主题的样式。

## 设计方案
- 采用前端注入 CSS 的方式，无需改动后端渲染逻辑；通过在预览 iframe 中写入 `<style>` 定义五类消息样式。
- 规范类名：`.msg`, `.info`, `.success`, `.warning`, `.error`, `.clear`。用户在模板中使用 `<div class="msg info">...</div>` 即可套用样式。
- 提供多个预设主题（如 Default / Bootstrap / Material / Dark / High-Contrast），通过 CSS 变量驱动：`--msg-bg-info`, `--msg-text-info`, `--msg-border-info` 等。

## 前端改动（templates/index.html）
- 在页头新增主题选择器：在 `templates/index.html:70-73` 的 `<header>` 内追加 `<select id="theme-select">`，列出 5 个预设主题。
- 新增主题映射与样式生成：在脚本区 `templates/index.html:97-146` 下方添加 `const THEMES = { ... }` 与 `function buildThemeCSS(themeName) { ... }`，输出统一的 `.msg.*` 样式表。
- 调整渲染流程：
  - 修改 `render()`（`templates/index.html:105-134`）在写入 iframe 时，构造完整文档：`<!doctype html><html><head><style>...</style></head><body>RENDERED_HTML</body></html>`。
  - 在 `debounceRender()` 中同时监听主题选择器变化，触发重新渲染。
- 使用示例与提示：在模板输入默认示例中加入一段消息演示，如：
  ```html
  <div class="msg info">信息消息</div>
  <div class="msg success">成功消息</div>
  <div class="msg warning">警告消息</div>
  <div class="msg error">错误消息</div>
  <div class="msg clear">清除/普通消息</div>
  ```

## 后端改动（app.py）
- 保持后端逻辑不变（`d:\06coding_project\Jinja2_tool\app.py:22-45`）。可选扩展：接受 `theme` 字段但前端注入已足够，无需更改接口。

## 主题规范（示例）
- Default：
  - info `#17a2b8`，success `#28a745`，warning `#ffc107`，error `#dc3545`，clear 透明
- Material：
  - info `#009688`，success `#4CAF50`，warning `#FFC107`，error `#F44336`，clear 透明
- Dark 与 High-Contrast：调整文本为高对比度、背景加深、边框强化
- 统一样式结构：
  - `.msg { padding:12px; border-radius:6px; border:1px solid var(--msg-border); margin:8px 0; }`
  - `.msg.info { background: var(--msg-bg-info); color: var(--msg-text-info); border-color: var(--msg-border-info); }`（success/warning/error/clear 同理）

## 验证与测试
- 启动工具后：
  - 切换主题，确认五类消息块颜色、边框、文字色均即时变化。
  - 在 Jinja2 模板中动态生成消息块（如循环 items 输出不同类别），验证样式套用正确。
  - 错误与 JSON 提示保持原逻辑不变。

## 文档更新
- 在 `说明文档.md` 增加“主题切换”章节：类名规范、主题列表与示例代码段。
- 在 `README.md` 增补使用说明与截图占位。

## 回滚与兼容
- 若用户不使用 `.msg.*` 类名，页面仍可正常渲染；主题仅影响使用了约定类名的元素。
- 所有改动仅在前端文件，回滚可通过移除主题选择器与注入逻辑。